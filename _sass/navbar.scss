@use "base";

.navbar {
    @extend %font-mono;
    background-color: var(--color-bg);
    color: var(--color-text-muted);
    // border-bottom: 1px dashed color-mix(in srgb, currentColor 50%, transparent);
    

    .navbar-brand {
        .brand {
            
            font-weight: 800;
            letter-spacing: -0.1rem;
        }
    }

    .navbar-item {
        gap: 0;
    }

    a.button {
        font-size: 0.8rem;
        width: 2.5rem;
        height: 2.5rem;
        border: none;
        box-shadow: none;;
    }
    
    .theme-toggle {
        
        --size: 0.8rem;
        background: none;
        // border: none;
        padding: 7px;
        
        // inline-size: var(--size);
        // block-size: var(--size);
        // border-radius: 50%;
        
        aspect-ratio: 1;
        cursor: pointer;
        touch-action: manipulation;                 // Dont wait for double-tap to zoom on mobile devices
        -webkit-tap-highlight-color: transparent;   // Remove the highlight color on iOS devices
        outline-offset: 5px;
        
        svg {
            inline-size: 100%;
            block-size: 100%;
            stroke-linecap: round;
        }
        
        @media (hover: none) {
            --size: 48px;
            --size: 0.8rem;
        }
    }
    
    .sun-and-moon {
        // Sun Styles: This is the default state (light mode), so no need to scope it inside a media query
        :is(.moon, .sun, .sun-beams) {
            transform-origin: center center;
        }
        :is(.moon, .sun) {
            fill: var(--color-accent);        
            
            .theme-toggle:is(:hover, :focus-visible) & {
                fill: var(--color-accent);
            }
        }
        .sun-beams {
            stroke: var(--color-accent);
            stroke-width: 2px;
            
            .theme-toggle:is(:hover, :focus-visible) & {
                stroke: var(--color-accent);
            }
        }
        
        // Moon Styles: Remove sun beams, scale up circle, bring in the circle mask
        // Since Moon is only visible in dark mode, we scope this inside the dark mode media query
        [data-theme="dark"] & {
            .sun {
                transform: scale(1.75);
            }
            
            .sun-beams {
                opacity: 0;
            }
            
            .moon{
                circle {
                    transform: translateX(-7px);
                    
                    @supports (cx: 1px) {
                        transform: translateX(0);
                        cx: 17px;
                    }
                }
            } 
        }
        
        // Toggle Animations
        @media (prefers-reduced-motion: no-preference) {
            .sun {
                transition: transform .5s var(--ease-elastic-3);
            }
            
            .sun-beams {
                transition: 
                transform .5s var(--ease-elastic-4), 
                opacity .5s var(--ease-3);
            }
            .moon {
                circle {
                    transition: transform .25s var(--ease-out-5);
                    @supports (cx: 1px) {
                        transition: cx .25s var(--ease-out-5);
                    }
                }
            }
            
            [data-theme="dark"] & {
                .sun {
                    transform: scale(1.75);
                    transition-timing-function: var(--ease-3);
                    transition-duration: .25s;
                }
                
                .sun-beams {
                    transform: rotateZ(-25deg);
                    transition-duration: .15s;
                }
                
                .moon {
                    circle{
                        transition-delay: .25s;
                        transition-duration: .5s;
                    }
                }
            }
        }
    }
}